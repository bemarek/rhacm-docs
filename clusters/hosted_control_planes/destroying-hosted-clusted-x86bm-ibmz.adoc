[#destroying-hosted-clusted-x86bm-ibmz]
= Destroying a hosted cluster on x86 bare metal with IBM Z compute nodes

To destroy a hosted cluster on `x86` bare metal with IBM Z compute nodes and its managed cluster resource, complete the following steps:

. Run the following command to scale the `NodePool` object to zero (0) nodes:

+
[source,bash]
----
oc -n <clusters_namespace> scale nodepool <nodepool_name> --replicas 0
----

+
After the node pool is scaled to 0, the compute nodes are detached from the hosted cluster. If the compute nodes are not detached from the hosted cluster or are stuck in the `Notready` state, delete the compute nodes manually by running the following command:  

+
[source,bash]
----
oc --kubeconfig $<hosted_clusted_name>.kubeconfig delete node <comopute_node_name>
----

+
. Verify the compute nodes status by entering the following command:

+
[source,bash]
----
oc --kubeconfig <hosted_cluster_name>.kubeconfig get nodes
----
After the compute nodes are detached from the hosted cluster, the status of the agents is changed to `auto-assign`. 

. Delete the agents from the cluster by running the following command:

+
[source,bash]
----
oc -n $<hosted_control_plane_namespace> delete agent <agent_name>
----

+
*Note:* You can delete the virtual machines that you created as agents after you delete the agents from the cluster.

. Destroy the hosted control plane. 

Run the following command by using the `hcp` command-line to destroy the hosted control plane:

+
[source,bash]
----
hcp destroy cluster agent --name $<hosted_cluster_name> --namespace ${clusters_namepsace}
----
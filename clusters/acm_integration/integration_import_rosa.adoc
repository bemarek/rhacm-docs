[#import-discover-rosa]
= Automating import for discovered OpenShift Service on AWS clusters

Automate the import of Red Hat OpenShift Service on AWS clusters by using policy enforcement.
//why do this?

[#auto-import-disc-prereqs]
== Prerequisites
//I need some stuff here

The following policy and procedure is an example of how to import all discovered OpenShift Service on AWS clusters automatically. 

To create the policy in the console, see Creating a cluster security policy from the console (link). By default this policy does not make changes to your cluster. 

. Create the following YAML file:

+
[source,yaml]
----

----



2. Run `oc apply -f filename.yaml -n namespace` to apply the file.
3. Deploy the policy to managed clusters with placement and placement binding send to the policy doc? (we need this from engineers) 


To enable automatic import the policy must be changed from an inform policy to enforce. (line 16-optional)
The policy creates a ConfigMap with a key named rosa-filter.  By default the key’s value is empty.  Specifying a string value for this key will select a subset of the matching ROSA clusters based on whether the string value provided matches any discovered ROSA cluster names. (line 34 change to filter value)
Managed Clusters that are imported are added to the default clusterset, update the policy to use a different clusterset if desired.


